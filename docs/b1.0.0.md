<br/>

!> [<span style='color:#008B00'>[ğŸ‘“ å®˜æ–¹è¯´æ˜ ]</span>](https://nlog-project.org/config/?tab=layout-renderers ':target=_blank') <span style='color:red'>æŒ‡ä»¤å˜é‡å†…ç›¸å…³å±æ€§ [ é€šè¿‡`:`åˆ†å‰² ]</span>

## âœ´ åŸºç¡€å˜é‡ :id=H2_1

### \- â˜¢ ${ var } å˜é‡å®šä¹‰ :id=H2_1_3_1

<br/>

>[!WARNING|style: flat|label: ç®€è¦è¯´æ˜ ]
>
>```csharp
>${var:name=String:default=String|Layout}
>
>```
>
>---
>
>```xml
><nlog>
>
>     <variable name="v1" value="admin" />
>     <variable name="v2" value="${message}" />  
>
>     <targets>
>         <target name="debug" type="Debug" layout="${var:v1} = ${var:v2}" />
>     </targets>
>
></nlog>
>
>
>```
>
>
>
><br/>

### \- ğŸ”¸ ${ logger } æ—¥å¿—ç±»åˆ« :id=H2_1_3_4

<br/>

>[!NOTE|style: flat|label: ç®€è¦è¯´æ˜ ]
>
>```csharp
>${logger}
>
>```
>
>
>
><br/>



### \- ğŸ”¸ ${ level } æ—¥å¿—çº§åˆ« :id=H2_1_3_2

<br/>

>[!NOTE|style: flat|label: ç®€è¦è¯´æ˜ ]
>
>```csharp
>${level:format=Name:uppercase=true}
>
>```
>
><span style='color:Blue'>[Â OPTIONS  ]</span>
>
>- `[ format ]`æ ¼å¼åŒ–è¾“å‡º
>- `[ uppercase ]`å¤§å°å†™è½¬æ¢
>
>---
>
>```csharp
>"${level:format=Name:uppercase=true}"     // Info
>"${level:format=FullName:uppercase=true}" // Information
>
>
>```
>
>
>
><br/>



### \- ğŸ”¸ ${ message } æ—¥å¿—æ¶ˆæ¯ :id=H2_1_3_5

<br/>

>[!NOTE|style: flat|label: ç®€è¦è¯´æ˜ ]
>
>```csharp
>${message}
>${replace-newlines:${message}} // åˆ é™¤æ¢è¡Œç¬¦
>    
>```
>
><br/>

### \- ğŸ”¸ ${ exception } å¼‚å¸¸ä¿¡æ¯ :id=H2_1_3_6

<br/>

>[!NOTE|style: flat|label: ç®€è¦è¯´æ˜ ]
>
>- <span style='color:red'>[ ç”±`LogEvent`æä¾›çš„å¼‚å¸¸ä¿¡æ¯ ]</span> [<span style='color:#008B00'>[ğŸ‘“ å®˜æ–¹è¯´æ˜ ]</span>](https://github.com/NLog/NLog/wiki/Exception-Layout-Renderer ':target=_blank')
>
>```csharp
>${exception:format=String:innerFormat=String
>            :maxInnerExceptionLevel=Integer
>            :innerExceptionSeparator=String
>            :separator=String
>            :exceptionDataSeparator=string)
>
>```
>
><span style='color:Blue'>[ OPTIONS ]</span>
>
>\-`Type`ï¼š`Exception.GetType().FullName`
>
>\-`ShortType`:`Exception.GetType().Name`
>
>\-`Message`: `Exception.Message`
>
>
>
>---
>
>```csharp
>"${exception)"          // System.ArgumentNullException: Value cannot be null. (Parameter 'å‚æ•°ä¸èƒ½ä¸ºç©º')
>"${exception:format=@)" // @ å°†æ‰€æœ‰ Exception å±æ€§åºåˆ—åŒ–ä¸º Json æ ¼å¼
>// {
>//     "Type":"System.ArgumentNullException", 
>//     "Message":"Value cannot be null. (Parameter 'å‚æ•°ä¸èƒ½ä¸ºç©º')", 
>//     "ParamName":"å‚æ•° ä¸èƒ½ä¸ºç©º", 
>//     "Data":{}, 
>//     "HResult":-2147467261
>// }
>
>"${exception:format=type}"     // "System.ArgumentNullException"
>"${exception:format=message}"  // Value cannot be null. (Parameter 'å‚æ•°ä¸èƒ½ä¸ºç©º')
>
>---------------------------
>
>Exception ex = new ExternalException("Exception with errorCode", 5000);
>
>Logger.LogError()
>       .Exception(ex)
>       .Log();
>
>
>```
>
>
>
><br/>



### \- â˜¢ ${ callsite } å †æ ˆè·Ÿè¸ª :id=H2_1_3_7

<br/>

>[!WARNING|style: flat|label: ç®€è¦è¯´æ˜ ]
>
>```csharp
>${callsite:className=Boolean:fileName=Boolean:includeSourcePath=Boolean:methodName=Boolean}
>
>```
>
><span style='color:Blue'>[ OPTIONS  ]</span>
>
>- `[ className ]`æ˜¯å¦å‘ˆç°ç±»å
>- `[ includeNamespace ]`æ˜¯å¦å‘ˆç°å‘½åç©ºé—´
>- `[ fileName ]`æ˜¯å¦å‘ˆç° [ æºæ–‡ä»¶å + è¡Œå· ] (`CallerFilePathAttribute + CallerLineNumberAttribute`)
>- `[ includeSourcePath ]`æ˜¯å¦å‘ˆç°æºæ–‡ä»¶è·¯å¾„ (`CallerFilePathAttribute`)
>- `[ methodName ]`æ˜¯å¦å‘ˆç°æ–¹æ³•åç§° (`CallerMemberNameAttribute`)
>
>---
>
>```csharp
>"${callsite:className=true:fileName=true:includeSourcePath=true:methodName=true}" 
>// TestConsole.Program.<Main>$(C:\Users\syl88\Desktop\TestConsole\Program.cs:32)
>
>
>```
>
><span style='color:red'>âš  æ³¨æ„ï¼šæ­¤é¡¹åœ¨æ‰§è¡Œå¤§é‡æ—¥å¿—è®°å½•æ—¶å°†ä¸¥é‡çš„æ€§èƒ½æŸå¤± [ å› ä¸ºå®ƒå¿…é¡»æ•è·æ¯æ¡æ—¥å¿—æ¶ˆæ¯çš„å®Œæ•´`StackTrace`]</span> [<span style='color:#008B00'>[ğŸ‘“ è§£å†³æ–¹æ¡ˆ ]</span>](https://github.com/NLog/NLog/wiki/Custom-extension-of-Logger-interface#custom-wrapper-and-callsite ':target=_blank')
>
>
>
><br/>







### \- â˜¢ ${ objectpath } æ¸²æŸ“å¯¹è±¡å±æ€§ :id=H2_1_3_8

<br/>

>[!WARNING|style: flat|label: ç®€è¦è¯´æ˜ ]
>
>- æ¸²æŸ“å¯¹è±¡å±æ€§ <span style='color:red'>[ æ”¯æŒåµŒå¥—å±æ€§ï¼Œä¸æ”¯æŒæ•°ç»„ ]</span>
>
>```csharp
>${other:objectpath=String}
>
>```
>
>---
>
>```csharp
>"${exception:objectpath=HResult}" // 5000
>
>---------------------------
>    
>Exception ex = new ExternalException("Exception with errorCode", 5000);
>int v = ex.HResult;
>logger.LogError(ex, message: "Hello World");
>
>
>```
>
>
>
><br/>



## âœ´ æ¡ä»¶å˜é‡ :id=H2_2

### \- ğŸ”¸ ${ when } :id=H2_2_3_1

<br/>

>[!NOTE|style: flat|label: ç®€è¦è¯´æ˜ ]
>
>- <span style='color:Blue'>[ æ»¡è¶³æŒ‡å®šæ¡ä»¶æ—¶ - è¾“å‡ºå†…éƒ¨å¸ƒå±€ ]</span>
>
>```csharp
>${when:when=Condition:inner=Layout:else=Layout}
>${other:when=Condition}
>
>```
>
><span style='color:Blue'>[ OPTIONS  ]</span>
>
>- `[ Condition ]`å¸ƒå±€æ¡ä»¶ [<span style='color:#008B00'>[ğŸ‘“ å®˜æ–¹è¯´æ˜ ]</span>](https://github.com/NLog/NLog/wiki/WhenEmpty-Layout-Renderer ':target=_blank')
>
>---
>
>```csharp
>"${when:when='${level}'>='Info':inner=Hello:else=Word}" // Hello
>
>
>```
>
>
>
><br/>

### \- ğŸ”¸ ${ whenEmpty } :id=H2_2_3_2

<br/>

>[!NOTE|style: flat|label: ç®€è¦è¯´æ˜ ]
>
>- <span style='color:Blue'>[ å†…éƒ¨å¸ƒå±€äº§ç”Ÿç©ºç»“æœæ—¶ï¼Œè¾“å‡ºæ›¿ä»£å¸ƒå±€ ]</span>
>
>```csharp
>${whenEmpty:whenEmpty=Layout:inner=Layout}
>${other:whenEmpty=Layout}
>
>```
>
>
>
><br/>



## â˜¢ ä¸Šä¸‹æ–‡ä¿¡æ¯ :id=H2_3

### \- ğŸ”¸ ${ all-event-properties } ä¸Šä¸‹æ–‡æ•°æ® :id=H2_3_3_1

<br/>

>[!WARNING|style: flat|label: ç®€è¦è¯´æ˜ ]
>
>- è®°å½•ä¸Šä¸‹æ–‡æ•°æ®
>
>```csharp
>${all-event-properties:format=String:separator=String:includeEmptyValues=boolean:includeScopeProperties=boolean}
>
>```
>
><span style='color:Blue'>[ OPTIONS  ]</span>
>
>- `[ separator ]`å±æ€§åˆ†éš”ç¬¦ [ é»˜è®¤`,`]
>- `[ exclude ]`è¦æ’é™¤çš„å±æ€§ (`P1, P2 ...`)
>- `[ includeScopeProperties ]`æ˜¯å¦åŒ…å«`${scopeproperty}` [ é»˜è®¤`false`]
>
>
>
>---
>
><span style='color:red'>[ ç»“æ„åŒ–æ—¥å¿— ]</span> [<span style='color:#008B00'>[ğŸ‘“ å®˜æ–¹è¯´æ˜ ]</span>](https://github.com/nlog/nlog/wiki/How-to-use-structured-logging  ':target=_blank')
>
>```csharp
>"${all-event-properties:includeScopeProperties =true}" // v1=å¼ ä¸‰, v2={ Name = å¼ ä¸‰, Age = 20 }, v3=å±æ€§1, P1=å±æ€§1, P2=å±æ€§2
>
>Logger.Logger.PushScopeProperties(new Dictionary<string, object> { { "P1", "å±æ€§1" }, { "P2", "å±æ€§2" } });
>{
>      Logger.LogInformation()
>            .Message("{v1}ï¼š{v2}", "å¼ ä¸‰", new { Name= "å¼ ä¸‰", Age = 20 })
>            .Property("v3", "å±æ€§1")
>            .Log();
>}
>
>// stringï¼š"v1"
>// number: v1
>
>// IEnumerable: v1,v2,v3
>// IDictionary: "k1"=v1,"k2"=v2
>
>// object: ToString()
>// åŒ¿åå¯¹è±¡: æ ¼å¼åºåˆ—åŒ–
>
>
>```
>
>
>
>
>
><br/>

### \- ğŸ”¸ ${ event-properties } ä¸Šä¸‹æ–‡æ•°æ®( å•ä¸ªå±æ€§ ) :id=H2_3_3_2

<br/>

>[!WARNING|style: flat|label: ç®€è¦è¯´æ˜ ]
>
>- æ”¯æŒ`:format=@`å°†è½¬æ¢æ ¼å¼`JSON`[<span style='color:#008B00'>[ğŸ‘“ å®˜æ–¹è¯´æ˜ ]</span>](https://github.com/NLog/NLog/wiki/EventProperties-Layout-Renderer ':target=_blank')
>
>```csharp
>${event-properties:item=String:culture=String:format=String:objectpath=String}
>
>```
>
><span style='color:Blue'>[ OPTIONS  ]</span>
>
>- `[ item ]`å±æ€§åç§°
>- `[ ignoreCase ]`å±æ€§åç§°æ˜¯å¦åŒºåˆ†å¤§å°å†™ [ é»˜è®¤`false`]
>- `[ objectpath ]`å±æ€§ä¸ºå¯¹è±¡æ—¶å€™ [ å¯æŒ‡å®šå¯¹è±¡è·¯å¾„ ]
>
>---
>
>```csharp
>"${event-properties:item=P1:objectpath=Name}" // å¼ ä¸‰
>
>Logger.LogInformation()
>       .Property("P1", new { Name= "å¼ ä¸‰", Age = 20 })
>       .Log();
> 
> 
> ```
>
>
>
>
>
><br/>

### \- â˜¢ ${ scopenested } æ—¥å¿—èŒƒå›´ :id=H2_3_3_3

<br/>

>[!WARNING|style: flat|label: ç®€è¦è¯´æ˜ ]
>
>-  [<span style='color:#008B00'>[ğŸ‘“ å®˜æ–¹è¯´æ˜ ]</span>](https://github.com/NLog/NLog/wiki/ScopeNested-Layout-Renderer ':target=_blank')
>
>```csharp
>${scopenested:bottomFrames=Integer:topFrames=Integer:separator=String}
>
>```
>
><span style='color:Blue'>[ OPTIONS  ]</span>
>
>- `[ separator]`åˆ†éš”ç¬¦
>- `[ format ]`æ ¼å¼åŒ–(`format=@`å°†æ ¼å¼åŒ–ä¸º`JSON.Array`)
>
>---
>
>```csharp
>// bc337acd44d84204892519d66316fe42
>// bc337acd44d84204892519d66316fe42 7344e0697ce2419b8f2b14dc37df7ac2
>"${scopenested}" 
>
>using (Logger.Logger.PushScopeNested(Guid.NewGuid().ToString("N"))) // [ åŸ ].BeginScope(Guid.NewGuid().ToString("N"))
>{
>    
>      Logger.LogInformation()
>            .Log();
>
>      using (Logger.Logger.PushScopeNested(Guid.NewGuid().ToString("N")))
>      {
>           Logger.LogInformation()
>                 .Log();
>      }
>    
>}
>
>
>```
>
>
>
><br/>



### \- â˜¢ ${ activity } æ´»åŠ¨è·Ÿè¸ª :id=H2_3_3_4

<br/>

>[!WARNING|style: flat|label: ç®€è¦è¯´æ˜ ]
>
>-  [<span style='color:#008B00'>[ğŸ‘“ Activity ]</span>](https://pl06972515.github.io/DOCS12/#/t8.0.0 ':target=_blank') [<span style='color:#008B00'>[ğŸ‘“ NLog.DiagnosticSource ]</span>](https://github.com/NLog/NLog.DiagnosticSource ':target=_blank')
>
>```csharp
>${activity:property=String}
>
>```
>
><span style='color:Blue'>[ OPTIONS  ]</span>
>
>- `[ SourceName ]`ä¸æ­¤æ´»åŠ¨å…³è”çš„æ´»åŠ¨æºçš„åç§°
>
>- `[ TraceId ]`è·Ÿè¸ªæ ‡è¯†
>- `[ SpanId]`å½“å‰æ´»åŠ¨æ“ä½œæ ‡è¯†
>- `[ OperationName ]`å½“å‰æ´»åŠ¨çš„æ“ä½œåç§°
>- `[ ParentId ]`çˆ¶æ´»åŠ¨æ ‡è¯†
>- -
>- `[ StartTimeUtc ]`æ“ä½œå¼€å§‹æ—¶é—´
>- `[ Duration ]`æ“ä½œæŒç»­æ—¶é—´ (`TimeSpan`)
>- `[ DurationMs ]`æ“ä½œæŒç»­æ—¶é—´ (`TimeSpan.TotalMilliseconds`)
>- -
>- `[ TraceState ]`è·Ÿè¸ªçŠ¶æ€æ ‡å¤´(`W3C`)
>- `[ TraceStateString ]`è·Ÿè¸ªçŠ¶æ€æ ‡å¤´(`W3C`)
>
><br/>

## âœ´ æ—¥æœŸæ—¶é—´ :id=H2_4

### \- ğŸ”¸ ${ longdate } æ—¥æœŸæ—¶é—´ :id=H2_4_3_1

<br/>

>[!WARNING|style: flat|label: ç®€è¦è¯´æ˜ ]
>
>```csharp
>${longdate:format=String}
>
>```
>
><span style='color:Blue'>[ OPTIONS  ]</span>
>
>- `[ format ]`æ—¥æœŸæ ¼å¼åŒ–
>
>---
>
>```csharp
>"${longdate:format=yyyy-MM-dd HH\\:mm\\:ss}" // 2024-10-18 10:41:49.0071
>
>    
>```
>
>
>
><br/>

### \- ğŸ”¸ ${ shortdate } æ—¥æœŸ :id=H2_4_3_2

<br/>

>[!NOTE|style: flat|label: ç®€è¦è¯´æ˜ ]
>
>```csharp
>${shortdate:format=String}
>
>```
>
><span style='color:Blue'>[ OPTIONS  ]</span>
>
>- `[ format ]`æ—¥æœŸæ ¼å¼åŒ–
>
>---
>
>```csharp
>"${shortdate:format=yyyy-MM-dd}" // 2024-10-18
>
>    
>```
>
>
>
><br/>

### \- ğŸ”¸ ${ time } æ—¶é—´ :id=H2_4_3_3

<br/>

>[!NOTE|style: flat|label: ç®€è¦è¯´æ˜ ]
>
>```csharp
>${time:format=String}
>
>```
>
><span style='color:Blue'>[ OPTIONS  ]</span>
>
>- `[ format ]`æ—¥æœŸæ ¼å¼åŒ–
>
>---
>
>```csharp
>"${time}" // 10:41:49.0071
>
>    
>```
>
>
>
><br/>

### \- ğŸ”¸ ${ ticks } æ—¶é—´æˆ³ :id=H2_4_3_4

<br/>

>[!NOTE|style: flat|label: ç®€è¦è¯´æ˜ ]
>
>```csharp
>${ticks}
>
>```
>
><br/>



## âœ´ å…¶ä»–å˜é‡ :id=H2_5

### \- ğŸ”¸ ${ newline } æ¢è¡Œ :id=H2_5_3_1

<br/>

>[!NOTE|style: flat|label: ç®€è¦è¯´æ˜ ]
>
>```csharp
>${newline}
>
>```
>
>
>
><br/>

### \- ğŸ”¸ ${ literal } è½¬ä¹‰ :id=H2_5_3_2

<br/>

>[!NOTE|style: flat|label: ç®€è¦è¯´æ˜ ]
>
>```csharp
>${literal:text=String}
>
>```
>
>---
>
>```csharp
>"${literal:text=Hello ${ Word }}" // Hello ${ Word }
>
>```
>
>
>
><br/>

### \- ğŸ”¸ ${ counter } è®¡æ•°å™¨ :id=H2_5_3_3

<br/>

>[!NOTE|style: flat|label: ç®€è¦è¯´æ˜ ]
>
>```csharp
>${counter:increment=Integer:sequence=String:value=Integer}
>
>```
>
><span style='color:Blue'>[ OPTIONS  ]</span>
>
>- `[ increment ]`è®¡æ•°å™¨æ¯æ¬¡ç´¯åŠ  [ é»˜è®¤`1`]
>- `[ value ]`è®¡æ•°å™¨åˆå§‹å€¼ [ é»˜è®¤`1`]
>
><br/>

### \- ğŸ”¸ ${ sequenceid } æ—¥å¿—åºå· :id=H2_5_3_4

<br/>

>[!NOTE|style: flat|label: ç®€è¦è¯´æ˜ ]
>
>- æ—¥å¿—åºåˆ—<span style='color:red'> [ åœ¨åº”ç”¨ç¨‹åºé‡æ–°å¯åŠ¨æ—¶é‡ç½®ä¸ºé›¶ ]</span>
>
>```csharp
>${sequenceid}
>
>```
>
>
>
><br/>



### \- ğŸ”¸ ${ guid } UUID :id=H2_5_3_5

<br/>

>[!NOTE|style: flat|label: ç®€è¦è¯´æ˜ ]
>
>```csharp
>${guid:format=String}
>
>```
>
><span style='color:Blue'>[ OPTIONS  ]</span>
>
>- `[ format ]`é»˜è®¤æ ¼å¼åŒ–ä¸º`Guid.ToString("N")`
>
><br/>



## â˜¢ å­—ç¬¦ä¸²å‡½æ•° :id=H2_6

### \- â˜¢ ${  format=@ } ä½¿ç”¨`JSON`æ ¼å¼æ˜¾ç¤º :id=H2_6_3_1

<br/>

>[!WARNING|style: flat|label: ç®€è¦è¯´æ˜ ]
>
>```csharp
>${other:format=@}
>
>```
>
><span style='color:Blue'>[ OPTIONS  ]</span>
>
>- `[ jsonEncode ]`æ˜¯å¦å·²`JSON`æ ¼å¼æ˜¾ç¤ºå†…å®¹
>
>---
>
>```csharp
>"${event-properties:item=P1}"          // { Name = å¼ ä¸‰, Age = 20 }
>"${event-properties:item=P1:format=@}" // { "Name":"å¼ ä¸‰", "Age":20 }
>    
>Logger.LogInformation()
>      .Property("P1", new { Name = "å¼ ä¸‰", Age = 20 })
>      .Log();
>
>
>```
>
>
>
><br/>

### \- ğŸ”¸ ${ lowercase } å­—ç¬¦ä¸²å°å†™ :id=H2_6_3_2

<br/>

>[!NOTE|style: flat|label: ç®€è¦è¯´æ˜ ]
>
>```csharp
>${lowercase:lowercase=Boolean:inner=Layout:culture=Culture}
>${other:lowercase=Boolean}
>
>```
>
>---
>
>```csharp
>${level:lowercase=true}
>
>
>```
>
>
>
><br/>

### \- ğŸ”¸ ${ uppercase } å­—ç¬¦ä¸²å¤§å†™ :id=H2_6_3_3

<br/>

>[!NOTE|style: flat|label: ç®€è¦è¯´æ˜ ]
>
>```csharp
>${uppercase:lowercase=Boolean:inner=Layout:culture=Culture}
>${other:uppercase=Boolean}
>
>```
>
><br/>

### \- ğŸ”¸ ${ pad } å­—ç¬¦ä¸²å¡«å…… :id=H2_6_3_4

<br/>

>[!NOTE|style: flat|label: ç®€è¦è¯´æ˜ ]
>
>```csharp
>${pad:padCharacter=Char:padding=Integer:inner=Layout}
>${other:padding=5}
>
>```
>
><span style='color:Blue'>[ OPTIONS  ]</span>
>
>- `[ padCharacter ]`å¡«å……å­—ç¬¦ [ é»˜è®¤ç©ºæ ¼ ]
>- `[ padding]`å­—ç¬¦ä¸²é•¿åº¦<span style='color:red'> [ æ­£æ•°å·¦å¡«å……ï¼Œè´Ÿæ•°å³å¡«å…… ]</span>
>
>---
>
>```csharp
>"${level:padding=-20:padCharacter=*}" // Info****************
>    
>    
>```
>
>
>
><br/>



### \- â˜¢ ${ replace-newlines } åˆ é™¤æ¢è¡Œç¬¦ :id=H2_6_3_5

<br/>

>[!WARNING|style: flat|label: ç®€è¦è¯´æ˜ ]
>
>```csharp
>${replace-newlines:inner=Layout:replacement=String}
>
>```
>
><span style='color:Blue'>[ OPTIONS  ]</span>
>
>- `[ replacement ]`å°† [ æ¢è¡Œç¬¦ ] æ›¿æ¢æˆæŒ‡å®šå­—ç¬¦ <span style='color:Blue'>[ é»˜è®¤ç©ºæ ¼ ]</span>
>
>---
>
>```csharp
>"${message}"
>// Hello
>// Word
>    
>"${replace-newlines:${message}}" //Hello Word
>
>Logger.LogInformation()
>       .Message("Hello\nWord")
>       .Log();
>
>
>```
>
>
>
><br/>

### \- â˜¢ ${ trim } åˆ é™¤é¦–å°¾ç©ºæ ¼ :id=H2_6_3_6

<br/>

>[!WARNING|style: flat|label: ç®€è¦è¯´æ˜ ]
>
>```csharp
>${trim-whitespace:trimWhiteSpace=Boolean:inner=Layout}
>${other:trimWhiteSpace=Boolean}
>
>
>```
>
>---
>
>```csharp
>"${replace-newlines:${message:trimWhiteSpace=true}}"
>
>
>```
>
>
>
><br/>



## â˜¢ ç¯å¢ƒç›¸å…³ :id=H2_7

```csharp
<extensions>
    <add assembly="NLog.Extensions.Logging"/>
</extensions>
      
      
```

### \- â˜¢ ${ configsetting } è¯»å– `IConfiguration`  :id=H2_7_3_1

<br/>

>[!WARNING|style: flat|label: ç®€è¦è¯´æ˜ ]
>
>[<span style='color:#008B00'>[ğŸ‘“ å®˜æ–¹è¯´æ˜ ]</span>](https://github.com/NLog/NLog/wiki/ConfigSetting-Layout-Renderer ':target=_blank')
>
>```csharp
>${configsetting:item=String:default=String}
>
>
>```
>
>---
>
>```csharp
>"${configsetting:item=Name}"              // å¼ ä¸‰
>"${configsetting:item=ContactInfo.Email}" // 13810000000@qq.com
>    
>var source = new Dictionary<string, string>
>{
>      ["Name"] = "å¼ ä¸‰",
>      ["ContactInfo:Email"] = "13810000000@qq.com",
>};
>IConfigurationRoot root = new ConfigurationBuilder()
>                              .AddInMemoryCollection(source)
>                              .Build();
>
>
>```
>
>âš  æ–¹å¼1`NLog.Extensions.Logging.ConfigSettingLayoutRenderer.DefaultConfiguration = config;`
>
>âš  æ–¹å¼2`NLog.Extensions.Hosting + NLog.Web.AspNetCore`
>
>
>
><br/>



### \- ğŸ”¸ ${ environment } ç¯å¢ƒå˜é‡ :id=H2_7_3_2

<br/>

>[!NOTE|style: flat|label: ç®€è¦è¯´æ˜ ]
>
>
>
>```csharp
>${environment:variable=String}
>
>```
>
><br/>

### \- ğŸ”¸ ${ hostname } æœåŠ¡å™¨ :id=H2_7_3_3

<br/>

>[!NOTE|style: flat|label: ç®€è¦è¯´æ˜ ]
>
>
>
>```csharp
>${hostname}
>${machinename}
>
>```
>
><br/>

### \- ğŸ”¸ ${ local-ip } æœåŠ¡å™¨IP :id=H2_7_3_4

<br/>

>[!NOTE|style: flat|label: ç®€è¦è¯´æ˜ ]
>
>```csharp
>${local-ip:cachedSeconds=60}
>
>```
>
><br/>

### \- ğŸ”¸ ${ processname } åº”ç”¨ç¨‹åºè¿›ç¨‹ :id=H2_7_3_5

<br/>

>[!NOTE|style: flat|label: ç®€è¦è¯´æ˜ ]
>
>```csharp
>${processid}                    // è¿›ç¨‹æ ‡è¯†
>${processname:fullName=Boolean} //è¿›ç¨‹åç§°
>
>```
>
><br/>

### \- ğŸ”¸ ${ threadname } åº”ç”¨ç¨‹åºçº¿ç¨‹ :id=H2_7_3_6

<br/>

>[!NOTE|style: flat|label: ç®€è¦è¯´æ˜ ]
>
>```csharp
>${threadid}
>${threadname}
>
>```
>
><br/>

## â˜¢ æ–‡ä»¶ç›®å½• :id=H2_8

### \- ğŸ”¸ ${ basedir }  :id=H2_8_3_1

<br/>

>[!NOTE|style: flat|label: ç®€è¦è¯´æ˜ ]
>
>- `AppContext.BaseDirectory`
>
>```csharp
>${basedir:dir=String:file=String}
>
>```
>
><span style='color:Blue'>[ OPTIONS  ]</span>
>
>- `[ dir ]`ç­‰æ•ˆäº`Path.Combine()`
>- `[ file ]`ç­‰æ•ˆäº`Path.Combine()`
>
>---
>
>```csharp
>"${basedir}"                          // C:\Users\syl88\Desktop\TestConsole\bin\Debug\net8.0
>"${basedir:dir=FileDir}"              // C:\Users\syl88\Desktop\TestConsole\bin\Debug\net8.0\FileDir
>"${basedir:dir=FileDir:file=qq.txt}"  // C:\Users\syl88\Desktop\TestConsole\bin\Debug\net8.0\FileDir\qq.txt
>
>
>```
>
>
>
><br/>

### \- ğŸ”¸ ${ currentdir }  :id=H2_8_3_2

<br/>

>[!NOTE|style: flat|label: ç®€è¦è¯´æ˜ ]
>
>- `System.Environment.CurrentDirectory`
>
>```csharp
>${currentdir:dir=String:file=String}
>
>```
>
><span style='color:Blue'>[ OPTIONS  ]</span>
>
>- `[ dir ]`ç­‰æ•ˆäº`Path.Combine()`
>- `[ file ]`ç­‰æ•ˆäº`Path.Combine()`
>
>
>
><br/>

### \- ğŸ”¸ ${ tempdir }  :id=H2_8_3_3

<br/>

>[!NOTE|style: flat|label: ç®€è¦è¯´æ˜ ]
>
>- è®¡ç®—æœºä¸´æ—¶ç›®å½•
>
>```csharp
>${tempdir:dir=String:file=String}
>
>```
>
><span style='color:Blue'>[ OPTIONS  ]</span>
>
>- `[ dir ]`ç­‰æ•ˆäº`Path.Combine()`
>- `[ file ]`ç­‰æ•ˆäº`Path.Combine()`
>
>
>
><br/>

### \- â˜¢ ${ filesystem }  :id=H2_8_3_4

<br/>

>[!WARNING|style: flat|label: ç®€è¦è¯´æ˜ ]
>
>- å°†<span style='color:red'> [ æ–‡ä»¶åä¸­çš„éæ³•å­—ç¬¦ ]</span> æ›¿æ¢ä¸ºå®‰å…¨å­—ç¬¦ (`é»˜è®¤: _`)
>
>```csharp
>${filesystem-normalize:fSNormalize=Boolean:inner=Layout}
>${other:fSNormalize=Boolean}
>
>
>```
>
><br/>



## â˜¢ [ .Net Core ] Request :id=H2_9

```xml
<extensions>
    <add assembly="NLog.Web.AspNetCore"/>
</extensions>


```



### \- ğŸ”¸ ${ aspnet-environment } :id=H2_9_3_1

<br/>

>[!WARNING|style: flat|label: ç®€è¦è¯´æ˜ ]
>
>- ç¨‹åºè¿è¡Œç¯å¢ƒ 
>
>```csharp
>${aspnet-environment}
>
>```
>
><br/>

### \- ğŸ”¸ ${ aspnet-webrootpath } :id=H2_9_3_2

<br/>

>[!WARNING|style: flat|label: ç®€è¦è¯´æ˜ ]
>
>- é™æ€ç›®å½•`wwwroot`
>
>```csharp
>${aspnet-webrootpath}
>
>```
>
><br/>

### \- ğŸ”¸ ${aspnet-TraceIdentifier} :id=H2_9_3_3

<br/>

>[!WARNING|style: flat|label: ç®€è¦è¯´æ˜ ]
>
>- å½“å‰è¯·æ±‚çš„ [ å”¯ä¸€æ ‡è¯† ]
>
>```csharp
>${aspnet-TraceIdentifier:ignoreActivityId=boolean}
>
>```
>
><br/>



### \- ğŸ”¸ ${ aspnet-request-url }  :id=H2_9_3_4

<br/>

>[!WARNING|style: flat|label: ç®€è¦è¯´æ˜ ]
>
>- è¯·æ±‚`URI`
>
>```csharp
>${aspnet-request-url:IncludeHost=boolean:IncludePort=boolean:IncludeQueryString=boolean:IncludeScheme=boolean}
>${aspnet-request-method}
>
>
>```
>
><span style='color:Blue'>[ OPTIONS  ]</span>
>
>- `[ IncludeHost ]`æ˜¯å¦åŒ…å«ä¸»æœº [ é»˜è®¤`true`]
>- `[ IncludePort ]`æ˜¯å¦åŒ…å«ç«¯å£ [ é»˜è®¤`true`]
>- `[ IncludePath ]`æ˜¯å¦åŒ…å«è·¯å¾„ [ é»˜è®¤`true`]
>- `[ IncludeQueryString ]`æ˜¯å¦åŒ…å«æŸ¥è¯¢ [ é»˜è®¤`true`]
>- `[ IncludeScheme ]`æ˜¯å¦åŒ…å«æ–¹æ¡ˆ [ é»˜è®¤`true`]
>
>---
>
>```csharp
>"${aspnet-request-url:IncludeQueryString=true}"  // produces http://www.exmaple.com/?t=1
>"${aspnet-request-url:IncludeQueryString=false}" // produces http://www.exmaple.com/
>
>
>```
>
>
>
><br/>

### \- ğŸ”¸ ${ aspnet-request-method }  :id=H2_9_3_5

<br/>

>[!WARNING|style: flat|label: ç®€è¦è¯´æ˜ ]
>
>```csharp
>${aspnet-request-method}
>${aspnet-request-remote-port}
>
>
>```
>
>
>
><br/>



### \- ğŸ”¸ ${ aspnet-request-ip }  :id=H2_9_3_6

<br/>

>[!WARNING|style: flat|label: ç®€è¦è¯´æ˜ ]
>
>- å‘é€è¯·æ±‚çš„å®¢æˆ·ç«¯`ip`
>
>```csharp
>${aspnet-request-ip}
>
>
>```
>
>
>
><br/>



### \- ğŸ”¸ ${ aspnet-request-local-ip }  :id=H2_9_3_7

<br/>

>[!WARNING|style: flat|label: ç®€è¦è¯´æ˜ ]
>
>- æ¥æ”¶è¯·æ±‚çš„æœåŠ¡ç«¯`ip`
>
>```csharp
>${aspnet-request-local-ip}
>
>
>```
>
>
>
><br/>



### \- ğŸ”¸ ${ aspnet-user-identity }  :id=H2_9_3_8

<br/>

>[!WARNING|style: flat|label: ç®€è¦è¯´æ˜ ]
>
>```csharp
>${aspnet-user-isAuthenticated}
>${aspnet-user-identity}
>${aspnet-user-claim:ClaimTypes.Name}
>${aspnet-user-authtype}
>
>```
>
>
>
><br/>



### \- ğŸ”¸ ${ aspnet-item }  :id=H2_9_3_9

<br/>

>[!WARNING|style: flat|label: ç®€è¦è¯´æ˜ ]
>
>- æ•°æ®æ¥æº`HttpContext.Items`
>
>```csharp
>${aspnet-item:item=String:objectpath=String:format=String}
>
>
>```
>
>---
>
>```csharp
>"${aspnet-item:item=v1}"                   // { Name = å¼ ä¸‰, Age = 30 }
>"${aspnet-item:item=v1:format=@}"          // {"Name":"å¼ ä¸‰", "Age":30}
>"${aspnet-item:item=v1:objectpath=Name}"   // å¼ ä¸‰
>
>app.MapGet("/", async (HttpContext context) =>
>{
>
>    context.Items["v1"] = new { 
>         Name = "å¼ ä¸‰",
>         Age = 30
>    };
>    NLog.Logger _logger = NLog.LogManager.GetLogger(typeof(Program).FullName);
>    _logger.ForInfoEvent()
>           .Log();
>
>});
>
>
>```
>
>
>
><br/>



### \- â˜¢ ${ aspnet-request-headers }  :id=H2_9_3_10

<br/>

>[!WARNING|style: flat|label: ç®€è¦è¯´æ˜ ]
>
>- æ•°æ®æ¥æº`HttpRequest.Headers`
>
>```csharp
>${aspnet-request-headers:headerNames=String
>                        :outputFormat:Enum
>                        :itemSeparator=String
>                        :valueSeparator=String
>                        :valuesOnly=Boolean}
>
>
>```
>
><span style='color:Blue'>[ OPTIONS  ]</span>
>
>- `[ headerNames ]`æŸ¥è¯¢æŒ‡å®šçš„é”®
>- `[ exclude ]`æ’é™¤æŒ‡å®šçš„é”®
>- `[ outputFormat ]`æ ¼å¼åŒ–è¾“å‡º
>- `[ itemSeparator ]`é”®çš„åˆ†éš”ç¬¦ ( é»˜è®¤`,`)
>- `[ valueSeparator ]`å€¼çš„åˆ†éš”ç¬¦ ( é»˜è®¤`,`)
>
><br/>

### \- â˜¢ ${ aspnet-request-cookie }  :id=H2_9_3_11

<br/>

>[!WARNING|style: flat|label: ç®€è¦è¯´æ˜ ]
>
>- æ•°æ®æ¥æº`HttpContext.Cookies`
>
>```csharp
>${aspnet-request-cookie:items=String
>                        :outputFormat:Enum
>                        :itemSeparator=String
>                        :valueSeparator=String
>                        :valuesOnly=Boolean}
>
>
>```
>
><span style='color:Blue'>[ OPTIONS  ]</span>
>
>- `[ headerNames ]`æŸ¥è¯¢æŒ‡å®šçš„é”®
>- `[ exclude ]`æ’é™¤æŒ‡å®šçš„é”®
>- `[ outputFormat ]`æ ¼å¼åŒ–è¾“å‡º
>- `[ itemSeparator ]`é”®çš„åˆ†éš”ç¬¦ ( é»˜è®¤`,`)
>- `[ valueSeparator ]`å€¼çš„åˆ†éš”ç¬¦ ( é»˜è®¤`,`)
>
><br/>

### \- â˜¢ ${ aspnet-request-routeparameters }  :id=H2_9_3_12

<br/>

>[!WARNING|style: flat|label: ç®€è¦è¯´æ˜ ]
>
>- æ•°æ®æ¥æº`HttpContext.RouteValues`
>
>```csharp
>${aspnet-request-routeparameters:items=String
>                                 :outputFormat:Enum
>                                 :itemSeparator=String
>                                 :valueSeparator=String
>                                 :valuesOnly=Boolean}
>
>
>```
>
><span style='color:Blue'>[ OPTIONS  ]</span>
>
>- `[ items ]`æŸ¥è¯¢æŒ‡å®šçš„é”® (``EG: Key1,Key2 - æœªæŒ‡å®šæ˜¾ç¤ºå…¨éƒ¨`)
>- `[ exclude ]`æ’é™¤æŒ‡å®šçš„é”®
>- `[ outputFormat ]`æ ¼å¼åŒ–è¾“å‡º
>- `[ itemSeparator ]`é”®çš„åˆ†éš”ç¬¦ ( é»˜è®¤`,`)
>- `[ valueSeparator ]`å€¼çš„åˆ†éš”ç¬¦ ( é»˜è®¤`,`)
>
><br/>

### \- â˜¢ ${ aspnet-request-querystring }  :id=H2_9_3_13

<br/>

>[!WARNING|style: flat|label: ç®€è¦è¯´æ˜ ]
>
>- æ•°æ®æ¥æº`HttpContext.Query`
>
>```csharp
>${aspnet-request-querystring:items=String
>                             :outputFormat:Enum
>                             :itemSeparator=String
>                             :valueSeparator=String
>                             :valuesOnly=Boolean}
>
>
>```
>
><span style='color:Blue'>[ OPTIONS  ]</span>
>
>- `[ items ]`æŸ¥è¯¢æŒ‡å®šçš„é”® (``EG: Key1,Key2 - æœªæŒ‡å®šæ˜¾ç¤ºå…¨éƒ¨`)
>- `[ exclude ]`æ’é™¤æŒ‡å®šçš„é”®
>- `[ outputFormat ]`æ ¼å¼åŒ–è¾“å‡º
>- `[ itemSeparator ]`é”®çš„åˆ†éš”ç¬¦ ( é»˜è®¤`,`)
>- `[ valueSeparator ]`å€¼çš„åˆ†éš”ç¬¦ ( é»˜è®¤`,`)
>
>---
>
>```csharp
>"${aspnet-request-querystring}" // k1=1001,1002,k3=1003
>"${aspnet-request-querystring:outputFormat=JsonArray}"      // [{"k1":"1001,1002"},{"k3":"1003"}]
>"${aspnet-request-querystring:outputFormat=JsonDictionary}" // {"k1":"1001,1002","k3":"1003"}
>    
> 
>```
>
>
>
><br/>

### \- â˜¢ ${ aspnet-request-posted-body }  :id=H2_9_3_14

<br/>

>[!WARNING|style: flat|label: ç®€è¦è¯´æ˜ ]
>
>- æ•°æ®æ¥æº`HttpContext.Body`
>
>```csharp
>${aspnet-request-posted-body}
>
>
>```
>
>âš  <span style='color:red'>[ éœ€è¦å¼•ç”¨ - ä¸­é—´ä»¶ ]</span> [<span style='color:#008B00'>[ğŸ‘“ æ¡ˆä¾‹è¯´æ˜ ]</span>](https://pl06972515.github.io/DOCS65/#/T1.0.0 ':target=_blank')
>
>---
>
>```csharp
>// [ éœ€è¦å¼•ç”¨ - ä¸­é—´ä»¶ ]
>app.UseMiddleware<NLog.Web.NLogRequestPostedBodyMiddleware>(
>     new NLog.Web.NLogRequestPostedBodyMiddlewareOptions()
>);
>
>
>```
>
>
>
><br/>

### \- â˜¢ ${ aspnet-request-form }  :id=H2_9_3_15

<br/>

>[!WARNING|style: flat|label: ç®€è¦è¯´æ˜ ]
>
>- æ•°æ®æ¥æº`HttpContext.Form`
>
>```csharp
>${aspnet-request-querystring:items=String
>                             :outputFormat:Enum
>                             :itemSeparator=String
>                             :valueSeparator=String
>                             :valuesOnly=Boolean}
>
>
>```
>
><span style='color:Blue'>[ OPTIONS  ]</span>
>
>- `[ items ]`æŸ¥è¯¢æŒ‡å®šçš„é”® (``EG: Key1,Key2 - æœªæŒ‡å®šæ˜¾ç¤ºå…¨éƒ¨`)
>- `[ exclude ]`æ’é™¤æŒ‡å®šçš„é”®
>- `[ outputFormat ]`æ ¼å¼åŒ–è¾“å‡º
>- `[ itemSeparator ]`é”®çš„åˆ†éš”ç¬¦ ( é»˜è®¤`,`)
>- `[ valueSeparator ]`å€¼çš„åˆ†éš”ç¬¦ ( é»˜è®¤`,`)
>
><br/>

### \- â˜¢ ${ aspnet-session }  :id=H2_9_3_16

<br/>

>[!WARNING|style: flat|label: ç®€è¦è¯´æ˜ ]
>
>- æ•°æ®æ¥æº`HttpContext.Session`
>
>```csharp
>${aspnet-session:items=String
>                 :outputFormat:Enum
>                 :itemSeparator=String
>                 :valueSeparator=String
>                 :valuesOnly=Boolean}
>
>
>```
>
><span style='color:Blue'>[ OPTIONS  ]</span>
>
>- `[ items ]`æŸ¥è¯¢æŒ‡å®šçš„é”® (``EG: Key1,Key2 - æœªæŒ‡å®šæ˜¾ç¤ºå…¨éƒ¨`)
>- `[ exclude ]`æ’é™¤æŒ‡å®šçš„é”®
>- `[ outputFormat ]`æ ¼å¼åŒ–è¾“å‡º
>- `[ itemSeparator ]`é”®çš„åˆ†éš”ç¬¦ ( é»˜è®¤`,`)
>- `[ valueSeparator ]`å€¼çš„åˆ†éš”ç¬¦ ( é»˜è®¤`,`)
>
><br/>



### \- ğŸ”¸${ aspnet-response-contenttype }  :id=H2_9_3_17

<br/>

>[!WARNING|style: flat|label: ç®€è¦è¯´æ˜ ]
>
>```csharp
>${aspnet-response-contenttype}
>
>```
>
><br/>

### \- ğŸ”¸ ${ aspnet-response-statuscode }  :id=H2_9_3_18

<br/>

>[!WARNING|style: flat|label: ç®€è¦è¯´æ˜ ]
>
>```csharp
>${aspnet-response-statuscode:format=d}
>
>```
>
><br/>

### \- ğŸ”¸ ${ aspnet-response-headers }  :id=H2_9_3_19

<br/>

>[!WARNING|style: flat|label: ç®€è¦è¯´æ˜ ]
>
>```csharp
>${aspnet-response-headers:items=String[]:outputFormat=Enum
>    :itemSeparator=String:valueSeparator=String
>    :valuesOnly=Boolean}
>
>```
>
><br/>

