<br/>

## âœ¡ ${ var } å˜é‡å®šä¹‰ :id=H2_1

>[!WARNING|style: flat|label: ç®€è¦è¯´æ˜ ]
>
>- [<span style='color:#008B00'>[ğŸ‘“ å®˜æ–¹è¯´æ˜ ]</span>](https://github.com/NLog/NLog/wiki/Var-Layout-Renderer ':target=_blank')
>
>```csharp
>${var:name=String:default=String}
>
>
>```
>
><br/>

```xml
<nlog>
    <variable name="v1" value="admin" />
    <variable name="v2" value="${message}" />  

    <targets>
        <target name="debug" type="Debug" layout="${var:v1} = ${var:v2}" />
    </targets>
</nlog>


```



## âœ¡ ${ logger } æ—¥å¿—ç±»åˆ« :id=H2_2

>[!WARNING|style: flat|label: ç®€è¦è¯´æ˜ ]
>
>- [<span style='color:#008B00'>[ğŸ‘“ å®˜æ–¹è¯´æ˜ ]</span>](https://github.com/NLog/NLog/wiki/Logger-Layout-Renderer ':target=_blank')
>
>```csharp
>${logger:shortName=Boolean}
>
>
>```
>
>
>
><br/>



## âœ¡ ${ level } æ—¥å¿—çº§åˆ« :id=H2_3

>[!WARNING|style: flat|label: ç®€è¦è¯´æ˜ ]
>
>- [<span style='color:#008B00'>[ğŸ‘“ å®˜æ–¹è¯´æ˜ ]</span>](https://github.com/NLog/NLog/wiki/Level-Layout-Renderer ':target=_blank')
>
>```csharp
>${level:format=Name:uppercase=true}
>
>
>```
>
><span style='color:Blue'>[Â OPTIONS  ]</span>
>
>- `[ format ]`æ ¼å¼åŒ–è¾“å‡º
>- `[ uppercase ]`å¤§å°å†™è½¬æ¢
>
><br/>

```csharp
"${level:format=Name:uppercase=true}"     // Info
"${level:format=FullName:uppercase=true}" // Information


```



## âœ¡ ${ message } æ—¥å¿—æ¶ˆæ¯ :id=H2_4

>[!WARNING|style: flat|label: ç®€è¦è¯´æ˜ ]
>
>- [<span style='color:#008B00'>[ğŸ‘“ å®˜æ–¹è¯´æ˜ ]</span>](https://github.com/NLog/NLog/wiki/Message-Layout-Renderer ':target=_blank')
>
>```csharp
>${message:exceptionSeparator=String:withException=Boolean:raw=Boolean}
>
>
>```
>
><span style='color:Blue'>[Â OPTIONS  ]</span>
>
>- `[ withException]`æ˜¯å¦åŒæ—¶æ˜¾ç¤º [ æ¶ˆæ¯ + å¼‚å¸¸ ]
>- `[ exceptionSeparator]`åˆ†éš”ç¬¦ ( æ¶ˆæ¯ + å¼‚å¸¸ ) [  é»˜è®¤`|`]
>- `[ raw ]`æ˜¯å¦ç›´æ¥è¾“å‡ºåŸå§‹æ¶ˆæ¯<span style='color:red'> ( ä¸å¯¹æ¶ˆæ¯ä¸­çš„å ä½ç¬¦è¿›è¡Œæ ¼å¼åŒ– )</span>
>
><br/>

```csharp
log.LogError(exception: new Exception("å¼‚å¸¸ä¿¡æ¯"),message: "æµ‹è¯•æ¶ˆæ¯: å§“å {Name}, å¹´é¾„ {Age}", "å¼ ä¸‰", 30);

"${message:withException=true:raw=true}"    // "æµ‹è¯•æ¶ˆæ¯: å§“å {Name}, å¹´é¾„ {Age}|System.Exception: å¼‚å¸¸ä¿¡æ¯"
"${message:withException=false:raw=false}"  // "æµ‹è¯•æ¶ˆæ¯: å§“å å¼ ä¸‰, å¹´é¾„ 30"

    
```



## âœ¡ ${ longdate } æ—¥æœŸæ—¶é—´ :id=H2_5

<br/>

>[!WARNING|style: flat|label: ç®€è¦è¯´æ˜ ]
>
>- [<span style='color:#008B00'>[ğŸ‘“ å®˜æ–¹è¯´æ˜ ]</span>](https://github.com/NLog/NLog/wiki/Date-Layout-Renderer ':target=_blank')
>
>```csharp
>${date:universalTime=Boolean:format=String:culture=Culture}
>
>
>```
>
><span style='color:Blue'>[ OPTIONS  ]</span>
>
>- `[ universalTime]`æ˜¯å¦è½¬æ¢`UTC`
>- `[ format ]`æ—¥æœŸæ ¼å¼åŒ–(`yyyy-MM-dd HH\\:mm\\:ss.fff`)
>
>
>
><br/>

```csharp
${date:format=yyyy-MM-dd HH\\:mm\\:ss}  // "2025-10-07 15:33:43"


```



## âœ¡ ${ exception } å¼‚å¸¸ä¿¡æ¯ :id=H2_6

>[!WARNING|style: flat|label: ç®€è¦è¯´æ˜ ]
>
>- [<span style='color:#008B00'>[ğŸ‘“ å®˜æ–¹è¯´æ˜ ]</span>](https://github.com/NLog/NLog/wiki/Exception-Layout-Renderer ':target=_blank')
>
>```csharp
>${exception:format=String:innerFormat=String
>            :maxInnerExceptionLevel=Integer
>            :innerExceptionSeparator=String
>            :separator=String
>            :exceptionDataSeparator=string}
>
>
>```
>
><span style='color:Blue'>[ OPTIONS ]</span>
>
>- <span style='color:Blue'>`[ format ]`å¼‚å¸¸æ ¼å¼åŒ–</span>
>
>  \-`Message`å¼‚å¸¸æ¶ˆæ¯
>
>  \-`Type`å¼‚å¸¸ç±»å‹å…¨å
>
>  \-`ShortType`å¼‚å¸¸ç±»å‹å
>
>  \-`ToString`å¼‚å¸¸çš„`ToString()`è¾“å‡º
>
>  \-`Method`å¼‚å¸¸å‘ç”Ÿçš„æ–¹æ³•
>
>  \-`StackTrace`å †æ ˆä¿¡æ¯
>
>  \-`Data`å¼‚å¸¸æ•°æ®å­—å…¸
>
>  \-`Source`å¼‚å¸¸æ¥æº
>
>  \-`TargetSite`å¼‚å¸¸ç›®æ ‡æ–¹æ³•
>
>  \-`HResult`å¼‚å¸¸`HRESULT`
>
>  \-`Properties`å¼‚å¸¸çš„é™„åŠ å±æ€§
>
>  \-`@`æ‰€æœ‰å±æ€§åºåˆ—åŒ–ä¸º`JSON`
>
>  <br/>
>
>- `[ flattenException ]`æ˜¯å¦è‡ªåŠ¨å±•å¼€`AggregateException`<span style='color:Blue'>( é»˜è®¤ï¼š`true`)</span>
>
>- `[ innerExceptionSeparator ]`å†…éƒ¨å¼‚å¸¸ä¹‹é—´çš„åˆ†éš”ç¬¦ <span style='color:Blue'>( é»˜è®¤ï¼šæ¢è¡Œ )</span>
>
><br/>
>
>---
>
>```csharp
>AggregateException exception = new AggregateException(
>     "å¤–å±‚å¼‚å¸¸",
>     new Exception("å†…å±‚å¼‚å¸¸")
>);
>log.LogError(exception: exception);
>
>"${exception}"          // "System.Exception: å†…å±‚å¼‚å¸¸"
>"${exception:format=@)" // "{\"Type\":\"System.Exception\", \"Message\":\"å†…å±‚å¼‚å¸¸\", \"Data\":{}, \"HResult\":-2146233088}"
>
>
>```
>
>
>
><br/>



## âœ¡ ${ callsite } å †æ ˆè·Ÿè¸ª :id=H2_7

>[!WARNING|style: flat|label: ç®€è¦è¯´æ˜ ]
>
>```csharp
>${callsite:className=Boolean:fileName=Boolean:includeSourcePath=Boolean:methodName=Boolean}
>
>
>```
>
><span style='color:red'>âš  ç¦ç”¨ï¼šå› æ€§èƒ½å½±å“ï¼Œè¯·ä½¿ç”¨è‡ªå®šä¹‰å±æ€§</span> [<span style='color:#008B00'>[ğŸ‘“ è§£å†³æ–¹æ¡ˆ ]</span>](https://learn.microsoft.com/en-us/dotnet/csharp/language-reference/attributes/caller-information ':target=_blank')
>
>
>
><br/>





## â˜¢ ${ activity } é“¾è·¯è¿½è¸ª :id=H2_8

>[!WARNING|style: flat|label: ç®€è¦è¯´æ˜ ]
>
>-  [<span style='color:#008B00'>[ğŸ‘“ OpenTelemetry ]</span>](https://pl06972515.github.io/DOCS93/#/README.md ':target=_blank') [<span style='color:#008B00'>[ğŸ‘“ NuGet - NLog.DiagnosticSource ]</span>](https://github.com/NLog/NLog.DiagnosticSource ':target=_blank')
>
>```csharp
>${activity:property=String}
>
>```
>
><span style='color:Blue'>[ OPTIONS  ]</span>
>
>- `[ TraceStateString ] W3C - traceparent`
>- `[ TraceId ]`è·Ÿè¸ªæ ‡è¯†
>- `[ SpanId]`æ“ä½œæ ‡è¯†
>- `[ ParentId ]`ä¸Šæ¸¸æ“ä½œæ ‡è¯†
>- -
>
>- `[ SourceName ]`æ“ä½œå
>- `[ OperationName ]`å½“å‰æ“ä½œå
>- -
>- `[ StartTimeUtc ]`æ“ä½œå¼€å§‹æ—¶é—´
>- `[ Duration ]`æ“ä½œæŒç»­æ—¶é—´ (`TimeSpan`)
>- `[ DurationMs ]`æ“ä½œæŒç»­æ—¶é—´ (`TimeSpan.TotalMilliseconds`)
>- 
>
><br/>





## â˜¢ ${ all-event-properties } æ—¥å¿—è·è½½ :id=H2_9

>[!WARNING|style: flat|label: ç®€è¦è¯´æ˜ ]
>
>- è®°å½•ä¸Šä¸‹æ–‡æ•°æ® [<span style='color:#008B00'>[ğŸ‘“ å®˜æ–¹è¯´æ˜ ]</span>](https://github.com/NLog/NLog/wiki/All-Event-Properties-Layout-Renderer  ':target=_blank')
>
>```csharp
>${all-event-properties:format=String:separator=String:includeEmptyValues=boolean:includeScopeProperties=boolean}
>
>
>```
>
><span style='color:Blue'>[ OPTIONS  ]</span>
>
>- `[ separator ]`å±æ€§åˆ†éš”ç¬¦ [ é»˜è®¤`,`]
>- `[ exclude ]`è¦æ’é™¤çš„å±æ€§ (`P1, P2 ...`)
>- `[ includeScopeProperties ]`æ˜¯å¦åŒ…å«`${scopeproperty}` [ é»˜è®¤`false`]
>
><br/>

```csharp
public record NetWorkInfo(
       string IPAddress,
       int Port);

public static partial class Log
{

     [LoggerMessage(EventId = 0,
                    Level = LogLevel.Information,
                    Message = "Can not open SQL connection {err}")]
     public static partial void Log_Message(this ILogger logger, string err, NetWorkInfo workInfo, Exception? exception = null);


}


log.Log_Message("æµ‹è¯•æ¶ˆæ¯", new NetWorkInfo("127.0.0.1", 7777));

----------------------------
    
# ${all-event-properties}
  "err=æµ‹è¯•æ¶ˆæ¯, workInfo=NetWorkInfo { IPAddress = 127.0.0.1, Port = 7777 }"


```



## â˜¢ ${ event-properties } æ—¥å¿—è·è½½( å•ä¸ªå±æ€§ ) :id=H2_10

<br/>

>[!WARNING|style: flat|label: ç®€è¦è¯´æ˜ ]
>
>- æ”¯æŒ`:format=@`å°†è½¬æ¢æ ¼å¼`JSON`[<span style='color:#008B00'>[ğŸ‘“ å®˜æ–¹è¯´æ˜ ]</span>](https://github.com/NLog/NLog/wiki/EventProperties-Layout-Renderer ':target=_blank')
>
>```csharp
>${event-properties:item=String:culture=String:format=String:objectpath=String}
>
>
>```
>
><span style='color:Blue'>[ OPTIONS  ]</span>
>
>- `[ item ]`å±æ€§åç§°
>- `[ ignoreCase ]`å±æ€§åç§°æ˜¯å¦åŒºåˆ†å¤§å°å†™ [ é»˜è®¤`false`]
>- <span style='color:red'>`[ objectpath ]`é’ˆå¯¹å¤åˆç±»å‹ [ å¯æŒ‡å®šå¯¹è±¡è·¯å¾„ ]</span>
>
><br/>

```csharp
public record NetWorkInfo(
       string IPAddress,
       int Port);

public static partial class Log
{

     [LoggerMessage(EventId = 0,
                    Level = LogLevel.Information,
                    Message = "Can not open SQL connection {err}")]
     public static partial void Log_Message(this ILogger logger, string err, NetWorkInfo workInfo, Exception? exception = null);


}


log.Log_Message("æµ‹è¯•æ¶ˆæ¯", new NetWorkInfo("127.0.0.1", 7777));

----------------------------
    
# ${event-properties:item=workInfo}
  "NetWorkInfo { IPAddress = 127.0.0.1, Port = 7777 }"

# ${event-properties:item=workInfo:format=@}
  "{\"IPAddress\":\"127.0.0.1\", \"Port\":7777}"
      
# ${event-properties:item=workInfo:objectpath=IPAddress}
  "127.0.0.1"

    
```

