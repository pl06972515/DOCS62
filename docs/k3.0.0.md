<br/>

## ✴ 基础变量 :id=H2_1

### \- ☢ ${ var } 变量定义 :id=H2_2_3_8

<br/>

>[!WARNING|style: flat|label: 简要说明 ]
>
>```csharp
>${var:name=String:default=String|Layout}
>
>```
>
>---
>
>```xml
><nlog>
>
>     <variable name="v1" value="admin" />
>     <variable name="v2" value="${message}" />  
>
>     <targets>
>         <target name="debug" type="Debug" layout="${var:v1} = ${var:v2}" />
>     </targets>
>
></nlog>
>
>
>```
>
>
>
><br/>

### \- 🔸 ${ level } 日志级别 :id=H2_2_3_1

<br/>

>[!NOTE|style: flat|label: 简要说明 ]
>
>```csharp
>${level:format=Name:uppercase=true}
>
>```
>
><span style='color:Blue'>[ OPTIONS  ]</span>
>
>- `[ format ]`格式化输出
>- `[ uppercase ]`大小写转换
>
>---
>
>```csharp
>"${level:format=Name:uppercase=true}"     // Info
>"${level:format=FullName:uppercase=true}" // Information
>
>
>```
>
>
>
><br/>

### \- 🔸 ${ literal } 字符串常量 :id=H2_2_3_2

<br/>

>[!NOTE|style: flat|label: 简要说明 ]
>
>```csharp
>${literal:text=String}
>
>```
>
>---
>
>```csharp
>"${literal:text=Hello ${ Word }}" // Hello ${ Word }
>    
>```
>
>
>
><br/>

### \- 🔸 ${ message } 日志消息 :id=H2_2_3_3

<br/>

>[!NOTE|style: flat|label: 简要说明 ]
>
>```csharp
>${message:truncate=1000}
>
>```
>
><span style='color:Blue'>[ OPTIONS  ]</span>
>
>- `[ truncate ]`限制消息长度
>
><br/>

### \- 🔸 ${ newline } 换行符 :id=H2_2_3_4

<br/>

>[!NOTE|style: flat|label: 简要说明 ]
>
>```csharp
>${newline}
>
>```
>
>
>
><br/>

### \- ☢ ${ objectpath } 渲染对象属性 :id=H2_2_3_5

<br/>

>[!WARNING|style: flat|label: 简要说明 ]
>
>- 渲染对象属性 <span style='color:red'>[ 支持嵌套属性，不支持数组 ]</span>
>
>```csharp
>${objectpath=String}
>
>```
>
>---
>
>```csharp
>layout="${exception:objectpath=HResult}" // 5000
>
>---------------------------
>    
>Exception ex = new ExternalException("Exception with errorCode", 5000);
>int v = ex.HResult;
>logger.LogError(ex, message: "Hello World");
>
>
>```
>
>
>
><br/>

### \- 🔸 ${ onexception } [ 条件 ]内部布局 :id=H2_2_3_7

<br/>

>[!NOTE|style: flat|label: 简要说明 ]
>
>- <span style='color:red'>[ 仅当日志消息包含`exception`时，才输出的内部布局 ]</span>
>
>```csharp
>${onexception:inner=Layout}
>
>```
>
>---
>
>```csharp
>layout="${onexception:inner=${exception:objectpath=HResult}}"
>
>---------------------------
>    
>Exception ex = new ExternalException("Exception with errorCode", 5000);
>int v = ex.HResult;
>logger.LogError(ex, message: "Hello World");
>
>
>```
>
>
>
><br/>



### \- ☢ ${ callsite } 堆栈跟踪 :id=H2_2_3_8

<br/>

>[!WARNING|style: flat|label: 简要说明 ]
>
>```csharp
>${callsite:className=Boolean:fileName=Boolean:includeSourcePath=Boolean:methodName=Boolean}
>
>```
>
><span style='color:Blue'>[ OPTIONS  ]</span>
>
>- `[ className ]`是否呈现类名
>- `[ includeNamespace ]`是否呈现命名空间
>- `[ fileName ]`是否呈现 [ 源文件名 + 行号 ] (`CallerFilePathAttribute + CallerLineNumberAttribute`)
>- `[ includeSourcePath ]`是否呈现源文件路径 (`CallerFilePathAttribute`)
>- `[ methodName ]`是否呈现方法名称 (`CallerMemberNameAttribute`)
>
>---
>
>```csharp
>"${callsite:className=true:fileName=true:includeSourcePath=true:methodName=true}" 
>// TestConsole.Program.<Main>$(C:\Users\syl88\Desktop\TestConsole\Program.cs:32)
>    
>    
>```
>
><span style='color:red'>⚠ 注意：此项在执行大量日志记录时将严重的性能损失 [ 因为它必须捕获每条日志消息的完整`StackTrace`]</span> [<span style='color:#008B00'>[👓 解决方案 ]</span>](https://github.com/NLog/NLog/wiki/Custom-extension-of-Logger-interface#custom-wrapper-and-callsite ':target=_blank')
>
>
>
><br/>



## ✴ 堆栈跟踪 :id=H2_2

